var U=Object.defineProperty;var V=(g,c,a)=>c in g?U(g,c,{enumerable:!0,configurable:!0,writable:!0,value:a}):g[c]=a;var m=(g,c,a)=>(V(g,typeof c!="symbol"?c+"":c,a),a);const P=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))u(l);new MutationObserver(l=>{for(const f of l)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function a(l){const f={};return l.integrity&&(f.integrity=l.integrity),l.referrerpolicy&&(f.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?f.credentials="include":l.crossorigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function u(l){if(l.ep)return;l.ep=!0;const f=a(l);fetch(l.href,f)}};P();var D=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},M={exports:{}};(function(g){(function(c,a,u){function l(t){var i=this,r=s();i.next=function(){var e=2091639*i.s0+i.c*23283064365386963e-26;return i.s0=i.s1,i.s1=i.s2,i.s2=e-(i.c=e|0)},i.c=1,i.s0=r(" "),i.s1=r(" "),i.s2=r(" "),i.s0-=r(t),i.s0<0&&(i.s0+=1),i.s1-=r(t),i.s1<0&&(i.s1+=1),i.s2-=r(t),i.s2<0&&(i.s2+=1),r=null}function f(t,i){return i.c=t.c,i.s0=t.s0,i.s1=t.s1,i.s2=t.s2,i}function d(t,i){var r=new l(t),e=i&&i.state,n=r.next;return n.int32=function(){return r.next()*4294967296|0},n.double=function(){return n()+(n()*2097152|0)*11102230246251565e-32},n.quick=n,e&&(typeof e=="object"&&f(e,r),n.state=function(){return f(r,{})}),n}function s(){var t=4022871197,i=function(r){r=String(r);for(var e=0;e<r.length;e++){t+=r.charCodeAt(e);var n=.02519603282416938*t;t=n>>>0,n-=t,n*=t,t=n>>>0,n-=t,t+=n*4294967296}return(t>>>0)*23283064365386963e-26};return i}a&&a.exports?a.exports=d:u&&u.amd?u(function(){return d}):this.alea=d})(D,g,!1)})(M);var E={exports:{}};(function(g){(function(c,a,u){function l(s){var t=this,i="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},s===(s|0)?t.x=s:i+=s;for(var r=0;r<i.length+64;r++)t.x^=i.charCodeAt(r)|0,t.next()}function f(s,t){return t.x=s.x,t.y=s.y,t.z=s.z,t.w=s.w,t}function d(s,t){var i=new l(s),r=t&&t.state,e=function(){return(i.next()>>>0)/4294967296};return e.double=function(){do var n=i.next()>>>11,o=(i.next()>>>0)/4294967296,h=(n+o)/(1<<21);while(h===0);return h},e.int32=i.next,e.quick=e,r&&(typeof r=="object"&&f(r,i),e.state=function(){return f(i,{})}),e}a&&a.exports?a.exports=d:u&&u.amd?u(function(){return d}):this.xor128=d})(D,g,!1)})(E);var F={exports:{}};(function(g){(function(c,a,u){function l(s){var t=this,i="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^(e^e<<1))|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,s===(s|0)?t.x=s:i+=s;for(var r=0;r<i.length+64;r++)t.x^=i.charCodeAt(r)|0,r==i.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function f(s,t){return t.x=s.x,t.y=s.y,t.z=s.z,t.w=s.w,t.v=s.v,t.d=s.d,t}function d(s,t){var i=new l(s),r=t&&t.state,e=function(){return(i.next()>>>0)/4294967296};return e.double=function(){do var n=i.next()>>>11,o=(i.next()>>>0)/4294967296,h=(n+o)/(1<<21);while(h===0);return h},e.int32=i.next,e.quick=e,r&&(typeof r=="object"&&f(r,i),e.state=function(){return f(i,{})}),e}a&&a.exports?a.exports=d:u&&u.amd?u(function(){return d}):this.xorwow=d})(D,g,!1)})(F);var N={exports:{}};(function(g){(function(c,a,u){function l(s){var t=this;t.next=function(){var r=t.x,e=t.i,n,o;return n=r[e],n^=n>>>7,o=n^n<<24,n=r[e+1&7],o^=n^n>>>10,n=r[e+3&7],o^=n^n>>>3,n=r[e+4&7],o^=n^n<<7,n=r[e+7&7],n=n^n<<13,o^=n^n<<9,r[e]=o,t.i=e+1&7,o};function i(r,e){var n,o=[];if(e===(e|0))o[0]=e;else for(e=""+e,n=0;n<e.length;++n)o[n&7]=o[n&7]<<15^e.charCodeAt(n)+o[n+1&7]<<13;for(;o.length<8;)o.push(0);for(n=0;n<8&&o[n]===0;++n);for(n==8&&(o[7]=-1),r.x=o,r.i=0,n=256;n>0;--n)r.next()}i(t,s)}function f(s,t){return t.x=s.x.slice(),t.i=s.i,t}function d(s,t){s==null&&(s=+new Date);var i=new l(s),r=t&&t.state,e=function(){return(i.next()>>>0)/4294967296};return e.double=function(){do var n=i.next()>>>11,o=(i.next()>>>0)/4294967296,h=(n+o)/(1<<21);while(h===0);return h},e.int32=i.next,e.quick=e,r&&(r.x&&f(r,i),e.state=function(){return f(i,{})}),e}a&&a.exports?a.exports=d:u&&u.amd?u(function(){return d}):this.xorshift7=d})(D,g,!1)})(N);var O={exports:{}};(function(g){(function(c,a,u){function l(s){var t=this;t.next=function(){var r=t.w,e=t.X,n=t.i,o,h;return t.w=r=r+1640531527|0,h=e[n+34&127],o=e[n=n+1&127],h^=h<<13,o^=o<<17,h^=h>>>15,o^=o>>>12,h=e[n]=h^o,t.i=n,h+(r^r>>>16)|0};function i(r,e){var n,o,h,b,q,L=[],_=128;for(e===(e|0)?(o=e,e=null):(e=e+"\0",o=0,_=Math.max(_,e.length)),h=0,b=-32;b<_;++b)e&&(o^=e.charCodeAt((b+32)%e.length)),b===0&&(q=o),o^=o<<10,o^=o>>>15,o^=o<<4,o^=o>>>13,b>=0&&(q=q+1640531527|0,n=L[b&127]^=o+q,h=n==0?h+1:0);for(h>=128&&(L[(e&&e.length||0)&127]=-1),h=127,b=4*128;b>0;--b)o=L[h+34&127],n=L[h=h+1&127],o^=o<<13,n^=n<<17,o^=o>>>15,n^=n>>>12,L[h]=o^n;r.w=q,r.X=L,r.i=h}i(t,s)}function f(s,t){return t.i=s.i,t.w=s.w,t.X=s.X.slice(),t}function d(s,t){s==null&&(s=+new Date);var i=new l(s),r=t&&t.state,e=function(){return(i.next()>>>0)/4294967296};return e.double=function(){do var n=i.next()>>>11,o=(i.next()>>>0)/4294967296,h=(n+o)/(1<<21);while(h===0);return h},e.int32=i.next,e.quick=e,r&&(r.X&&f(r,i),e.state=function(){return f(i,{})}),e}a&&a.exports?a.exports=d:u&&u.amd?u(function(){return d}):this.xor4096=d})(D,g,!1)})(O);var I={exports:{}};(function(g){(function(c,a,u){function l(s){var t=this,i="";t.next=function(){var e=t.b,n=t.c,o=t.d,h=t.a;return e=e<<25^e>>>7^n,n=n-o|0,o=o<<24^o>>>8^h,h=h-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-o|0,t.d=o<<16^n>>>16^h,t.a=h-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,s===Math.floor(s)?(t.a=s/4294967296|0,t.b=s|0):i+=s;for(var r=0;r<i.length+20;r++)t.b^=i.charCodeAt(r)|0,t.next()}function f(s,t){return t.a=s.a,t.b=s.b,t.c=s.c,t.d=s.d,t}function d(s,t){var i=new l(s),r=t&&t.state,e=function(){return(i.next()>>>0)/4294967296};return e.double=function(){do var n=i.next()>>>11,o=(i.next()>>>0)/4294967296,h=(n+o)/(1<<21);while(h===0);return h},e.int32=i.next,e.quick=e,r&&(typeof r=="object"&&f(r,i),e.state=function(){return f(i,{})}),e}a&&a.exports?a.exports=d:u&&u.amd?u(function(){return d}):this.tychei=d})(D,g,!1)})(I);var R={exports:{}};(function(g){(function(c,a,u){var l=256,f=6,d=52,s="random",t=u.pow(l,f),i=u.pow(2,d),r=i*2,e=l-1,n;function o(x,p,w){var y=[];p=p==!0?{entropy:!0}:p||{};var v=L(q(p.entropy?[x,$(a)]:x==null?_():x,3),y),k=new h(y),A=function(){for(var C=k.g(f),X=t,j=0;C<i;)C=(C+j)*l,X*=l,j=k.g(1);for(;C>=r;)C/=2,X/=2,j>>>=1;return(C+j)/X};return A.int32=function(){return k.g(4)|0},A.quick=function(){return k.g(4)/4294967296},A.double=A,L($(k.S),a),(p.pass||w||function(C,X,j,z){return z&&(z.S&&b(z,k),C.state=function(){return b(k,{})}),j?(u[s]=C,X):C})(A,v,"global"in p?p.global:this==u,p.state)}function h(x){var p,w=x.length,y=this,v=0,k=y.i=y.j=0,A=y.S=[];for(w||(x=[w++]);v<l;)A[v]=v++;for(v=0;v<l;v++)A[v]=A[k=e&k+x[v%w]+(p=A[v])],A[k]=p;(y.g=function(C){for(var X,j=0,z=y.i,G=y.j,B=y.S;C--;)X=B[z=e&z+1],j=j*l+B[e&(B[z]=B[G=e&G+X])+(B[G]=X)];return y.i=z,y.j=G,j})(l)}function b(x,p){return p.i=x.i,p.j=x.j,p.S=x.S.slice(),p}function q(x,p){var w=[],y=typeof x,v;if(p&&y=="object")for(v in x)try{w.push(q(x[v],p-1))}catch{}return w.length?w:y=="string"?x:x+"\0"}function L(x,p){for(var w=x+"",y,v=0;v<w.length;)p[e&v]=e&(y^=p[e&v]*19)+w.charCodeAt(v++);return $(p)}function _(){try{var x;return n&&(x=n.randomBytes)?x=x(l):(x=new Uint8Array(l),(c.crypto||c.msCrypto).getRandomValues(x)),$(x)}catch{var p=c.navigator,w=p&&p.plugins;return[+new Date,c,w,c.screen,$(a)]}}function $(x){return String.fromCharCode.apply(0,x)}if(L(u.random(),a),g.exports){g.exports=o;try{n=require("crypto")}catch{}}else u["seed"+s]=o})(typeof self!="undefined"?self:D,[],Math)})(R);var K=M.exports,H=E.exports,J=F.exports,Q=N.exports,W=O.exports,Y=I.exports,S=R.exports;S.alea=K;S.xor128=H;S.xorwow=J;S.xorshift7=Q;S.xor4096=W;S.tychei=Y;var T=S;class Z{constructor(c,a,u,l,f){m(this,"_display",0);m(this,"field");m(this,"x");m(this,"y");m(this,"value",0);m(this,"element");m(this,"options");this.field=c,this.x=a,this.y=u,this.value=l?-1:0,this.options=f!=null?f:{questions:!1},this.element=document.createElement("div"),this.display=0,this.element.addEventListener("mouseup",d=>{switch(d.button){case 0:this.leftClick();break;case 2:this.rightClick();break}}),this.element.addEventListener("contextmenu",d=>{d.preventDefault()},!1)}get display(){return this._display}set display(c){switch(this.element.className="cell",this.element.textContent="",c){case 5:switch(this.element.classList.add("open"),this.value){case 0:this.element.classList.add("zero");break;case 1:this.element.classList.add("one");break;case 2:this.element.classList.add("two");break;case 3:this.element.classList.add("three");break;case 4:this.element.classList.add("four");break;case 5:this.element.classList.add("five");break;case 6:this.element.classList.add("six");break;case 7:this.element.classList.add("seven");break;case 8:this.element.classList.add("eight");break}this.element.textContent=""+this.value;break;case 0:this.element.classList.add("closed");break;case 1:this.element.classList.add("closed"),this.element.classList.add("flag");break;case 2:this.element.classList.add("closed"),this.element.classList.add("question"),this.element.textContent="?";break}this._display=c}get surrounding(){return[this.field.get(this.y-1,this.x+0),this.field.get(this.y-1,this.x+1),this.field.get(this.y-0,this.x+1),this.field.get(this.y+1,this.x+1),this.field.get(this.y+1,this.x+0),this.field.get(this.y+1,this.x-1),this.field.get(this.y-0,this.x-1),this.field.get(this.y-1,this.x-1)]}countAdjacentBombs(){return this.surrounding.reduce((c,a)=>c+(a&&a.value<0?1:0),0)}countAdjacentFlags(){return this.surrounding.reduce((c,a)=>c+(a&&a.display===1?1:0),0)}setValue(){this.value!==-1&&(this.value=this.countAdjacentBombs())}leftClick(){switch(this.display){case 0:this.open();break;case 1:break;case 5:this.openAdjacents();break}}open(){this.display===0&&(this.value===-1?this.field.die():(this.display=5,(this.value===0||this.value===this.countAdjacentFlags())&&this.openAdjacents()))}openAdjacents(){this.countAdjacentFlags()===this.value&&this.surrounding.forEach(c=>{c&&c.open()})}die(){}rightClick(){switch(this.display){case 0:this.display=1;break;case 1:this.display=this.options.questions?2:0;break;case 2:this.display=0;break}}}class tt{constructor(c,a){m(this,"_seed");m(this,"generator");this._seed=c,this.generator=a(this._seed)}get seed(){return this._seed}getIntBetween(c,a){return Math.round(this.generator()*(a-c)+c-.5)}}class et extends tt{generateBoard(c,a,u){const l=Array.from(Array(c)).map(()=>Array(a).fill(!1));for(let f=0;f<u;){const d=this.getIntBetween(0,c),s=this.getIntBetween(0,a);l[d][s]||(f++,l[d][s]=!0)}return l}}console.log(T.alea);class nt{constructor(c,a,u){m(this,"width");m(this,"height");m(this,"mines",18);m(this,"fieldDiv");m(this,"cells");m(this,"_openCount",0);if(this.fieldDiv=u,this.width=c,this.height=a,this.width<1||this.height<1)throw new Error("we fucked up");this.cells=Array.from(Array(this.height)).map(()=>Array(this.width).fill(void 0)),this.setUpGame()}setUpGame(){this.fieldDiv.classList.add("field"),this.fieldDiv.style.gridTemplateRows=`repeat(${this.height}, 36px)`,this.fieldDiv.style.gridTemplateColumns=`repeat(${this.width}, 36px)`;const a=new et("my seed",T.alea).generateBoard(this.height,this.width,this.mines);for(let u=0;u<this.cells.length;u++){const l=this.cells[u];for(let f=0;f<l.length;f++){const d=l[f]=new Z(this,f,u,a[u][f]);this.fieldDiv.appendChild(d.element)}}this.cells.map(u=>u.map(l=>l.setValue()))}get(c,a){if(!(a>=this.width||a<0||c>=this.height||c<0))return this.cells[c][a]}get openCount(){return this._openCount}cellOpened(){this._openCount++,this.width*this.height-this.mines===this.openCount&&alert("game over!")}die(){console.log()}}const it=document.querySelector("#field"),rt=10,st=10;new nt(rt,st,it);
